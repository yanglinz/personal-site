---
import type { CollectionEntry } from "astro:content";
import { imageMarkup } from './ImageHelper';
import path from "node:path";

interface Props {
  slug: string;
  data: CollectionEntry<"posts">;
}

const { slug, data } = Astro.props;

const rootPath = "/Users/yz/Dev/personal-site/packages/www";
// const imagePath = path.resolve(__dirname, "../content/posts/service-boundaries/banner.jpg");
const imagePath = path.resolve(
  rootPath,
  "src/content/posts",
  slug,
  (data as any).featuredImage
);
const imageHtml = await imageMarkup(imagePath, "TODO: Alt text");

console.log(imageHtml);
---

<figure>
  <Fragment set:html={imageHtml} />
</figure>
