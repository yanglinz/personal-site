---
import type { CollectionEntry } from "astro:content";
import * as datefns from "date-fns";
import { getId } from "../lib/astro";

interface Props {
  post?: CollectionEntry<"posts">;
  til?: CollectionEntry<"til">;
}

const { post, til } = Astro.props;

let entryUrl = "/404";
if (post) {
  entryUrl = `/posts/${getId(post)}`;
}
if (til) {
  entryUrl = `/til/${getId(til)}`;
}

const entryTitle = post?.data?.title || til?.data?.title;
const entryDate = post?.data?.date || til?.data?.date;
---

<li>
  <div
    class="u-l-contain py-5 md:grid md:grid-cols-12 md:gap-4 border-t border-stone-200"
  >
    <div class="md:col-span-2">
      <p class="">
        <a href={entryUrl} class="u-f-mono tracking-wide text-sm uppercase">
          <time>{entryDate && datefns.format(entryDate, "MM/dd/yyyy")}</time>
        </a>
      </p>
    </div>

    <div class="col-span-8">
      <a href={entryUrl} class="text-lg">
        <h3>
          {entryTitle}
        </h3>
      </a>
    </div>
  </div>
</li>
