---
import type { CollectionEntry } from "astro:content";
import { imageMarkup, getFeaturedImagePath } from "../lib/image";

interface Props {
  id: string;
  post: CollectionEntry<"posts">;
}

const { id, post } = Astro.props;

const frontmatter = post.data;
const src = await getFeaturedImagePath(id, post);
const imageHtml = await imageMarkup(src, frontmatter.featuredImageAlt || "");
---

<figure>
  <Fragment set:html={imageHtml} />
</figure>

<div class="l-12-12">
  <div class="p-3 text-center text-stone-400 text-sm">
    Photo of
    <span class="italic">
      '{frontmatter.featuredImageAlt}'
    </span>
    by <a class="text-stone-600" href={frontmatter.featuredImageUrl}
      >{frontmatter.featuredImageAuthor}</a
    > on <a class="text-stone-600" href={frontmatter.featuredImageUrl}
    >Unsplash</a>.
  </div>
</div>
