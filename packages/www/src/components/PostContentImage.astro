---
import type { CollectionEntry } from "astro:content";
import { imageMarkup, getPostImagePath } from "../lib/image";

interface Props {
  mdocContext: {
    slug: string;
    data: CollectionEntry<"posts">;
  };
  path: string;
  alt: string;
}

const src = await getPostImagePath(Astro.props.mdocContext, Astro.props.path);
const imageHtml = await imageMarkup(src, Astro.props.alt);
---

<figure>
  <Fragment set:html={imageHtml} />
</figure>
