---
import type { CollectionEntry } from "astro:content";
import { imageMarkup, getPostImagePath } from "../lib/image";

interface Props {
  mdocContext: {
    slug: string;
    data: CollectionEntry<"posts">;
  },
  src: string
  alt: string
}

const src = getPostImagePath(Astro.props.mdocContext, Astro.props.src);
const imageHtml = await imageMarkup(src, Astro.props.alt);
---

<figure>
  <Fragment set:html={imageHtml} />
</figure>
